import { motion, AnimatePresence } from 'framer-motion';
import { useState, useEffect } from 'react';

const WINE_FACTS = [
  "üç∑ –°–∞–º–æ–µ —Å—Ç–∞—Ä–æ–µ –≤–∏–Ω–æ –≤ –º–∏—Ä–µ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ –≤ –ì–µ—Ä–º–∞–Ω–∏–∏. –û–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±—É—Ç—ã–ª–∫–µ —Å 325 –≥–æ–¥–∞ –Ω–∞—à–µ–π —ç—Ä—ã!",
  "üåç –í –º–∏—Ä–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–æ–ª–µ–µ 10,000 —Å–æ—Ä—Ç–æ–≤ –≤–∏–Ω–æ–≥—Ä–∞–¥–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –≤–∏–Ω–∞",
  "üçá –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –æ–¥–Ω–æ–π –±—É—Ç—ã–ª–∫–∏ –≤–∏–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–∫–æ–ª–æ 600-800 –≤–∏–Ω–æ–≥—Ä–∞–¥–∏–Ω",
  "üëÉ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–º–µ–ª—å–µ –º–æ–≥—É—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å –±–æ–ª–µ–µ 1,000 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Ä–æ–º–∞—Ç–æ–≤ –≤ –≤–∏–Ω–µ",
  "ü•Ç –ó–≤—É–∫ –ª–æ–ø–∞—é—â–∏—Ö—Å—è –ø—É–∑—ã—Ä—å–∫–æ–≤ –≤ —à–∞–º–ø–∞–Ω—Å–∫–æ–º ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–∑—Ä—ã–≤—ã —É–≥–ª–µ–∫–∏—Å–ª–æ–≥–æ –≥–∞–∑–∞",
  "üå°Ô∏è –ò–¥–µ–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∏–Ω–∞ ‚Äî 12-15¬∞C —Å –≤–ª–∞–∂–Ω–æ—Å—Ç—å—é 70%",
  "üçæ –°–∞–º–∞—è –¥–æ—Ä–æ–≥–∞—è –±—É—Ç—ã–ª–∫–∞ –≤–∏–Ω–∞ –±—ã–ª–∞ –ø—Ä–æ–¥–∞–Ω–∞ –∑–∞ $558,000 ‚Äî Ch√¢teau Lafite 1787 –≥–æ–¥–∞",
  "‚è∞ –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –±—É—Ç—ã–ª–∫–∏, –∫—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ —É–ø–æ—Ç—Ä–µ–±–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 3-5 –¥–Ω–µ–π",
  "üî¥ –ö—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —Ü–≤–µ—Ç –∏–∑ –∫–æ–∂–∏—Ü—ã –≤–∏–Ω–æ–≥—Ä–∞–¥–∞, –∞ –Ω–µ –∏–∑ —Å–æ–∫–∞",
  "‚ö™ –ë–µ–ª–æ–µ –≤–∏–Ω–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏–∑ –∫—Ä–∞—Å–Ω–æ–≥–æ –≤–∏–Ω–æ–≥—Ä–∞–¥–∞, –µ—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–∂–∏—Ü—É",
  "üåπ –†–æ–∑–æ–≤–æ–µ –≤–∏–Ω–æ ‚Äî —ç—Ç–æ –Ω–µ —Å–º–µ—Å—å –∫—Ä–∞—Å–Ω–æ–≥–æ –∏ –±–µ–ª–æ–≥–æ! –≠—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞",
  "üçä –û—Ä–∞–Ω–∂–µ–≤–æ–µ –≤–∏–Ω–æ ‚Äî —ç—Ç–æ –±–µ–ª–æ–µ –≤–∏–Ω–æ, –Ω–∞—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞ –∫–æ–∂–∏—Ü–µ –≤–∏–Ω–æ–≥—Ä–∞–¥–∞ –∫–∞–∫ –∫—Ä–∞—Å–Ω–æ–µ",
  "üé® –¶–≤–µ—Ç –≤–∏–Ω–∞ –º–æ–∂–µ—Ç —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–µ: –∫—Ä–∞—Å–Ω–æ–µ —Ç–µ–º–Ω–µ–µ—Ç, –±–µ–ª–æ–µ ‚Äî –∂–µ–ª—Ç–µ–µ—Ç",
  "üëÅÔ∏è –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤–∏–Ω–∞ –º–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å, –ø–æ–¥–Ω–µ—Å—è –±–æ–∫–∞–ª –∫ —Å–≤–µ—Ç—É",
  "üåä '–°–ª–µ–∑—ã –≤–∏–Ω–∞' –Ω–∞ —Å—Ç–µ–Ω–∫–∞—Ö –±–æ–∫–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è –∏ —Å–∞—Ö–∞—Ä–∞",
  "üç∑ –ë–æ–∫–∞–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∏–Ω –∏–º–µ—é—Ç —Ä–∞–∑–Ω—É—é —Ñ–æ—Ä–º—É –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∞—Ä–æ–º–∞—Ç–∞",
  "üé≠ –°–ª–æ–≤–æ '—Å–æ–º–µ–ª—å–µ' –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–≥–æ 'sommelier' ‚Äî –≤–∏–Ω–æ—á–µ—Ä–ø–∏–π",
  "üìö –ù–∞—É–∫–∞ –æ –≤–∏–Ω–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç–Ω–æ–ª–æ–≥–∏—è, –∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç ‚Äî —ç–Ω–æ–ª–æ–≥",
  "üè∫ –î—Ä–µ–≤–Ω–∏–µ —Ä–∏–º–ª—è–Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∏ –≤ –≤–∏–Ω–æ –º–æ—Ä—Å–∫—É—é –≤–æ–¥—É –∏ –º—ë–¥",
  "‚ö° –®–∞–º–ø–∞–Ω—Å–∫–æ–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º –≤ 6 –∞—Ç–º–æ—Å—Ñ–µ—Ä ‚Äî –≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–π —à–∏–Ω—ã!",
];

export function WinePreloader() {
  const [currentFactIndex, setCurrentFactIndex] = useState(0);

  useEffect(() => {
    // –ú–µ–Ω—è–µ–º —Ñ–∞–∫—Ç –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
    const interval = setInterval(() => {
      setCurrentFactIndex((prev) => (prev + 1) % WINE_FACTS.length);
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  return (
    <div className="fixed inset-0 z-50 bg-[#E7E5E1] flex flex-col items-center justify-center p-6">
      {/* Uncork Logo */}
      <div className="mb-8">
        <img 
          src="https://uncork.ru/wp-content/themes/uncork/img/uncork.svg"
          alt="Uncork"
          className="h-8 opacity-90"
        />
      </div>

      {/* Loading Text */}
      <h2 className="text-[#1A1A1A] mb-2">
        –ó–∞–≥—Ä—É–∂–∞—é –≤–∏–Ω–Ω—É—é –∫–∞—Ä—Ç—É...
      </h2>

      {/* Loading Dots */}
      <div className="flex gap-2 mb-8">
        {[0, 1, 2].map((i) => (
          <motion.div
            key={i}
            className="w-2 h-2 bg-[#9F5721] rounded-full"
            animate={{
              scale: [1, 1.5, 1],
              opacity: [0.3, 1, 0.3],
            }}
            transition={{
              duration: 1.5,
              repeat: Infinity,
              delay: i * 0.2,
              ease: "easeInOut",
            }}
          />
        ))}
      </div>

      {/* Wine Facts with AnimatePresence */}
      <div className="max-w-md w-full min-h-[120px] flex items-center justify-center">
        <AnimatePresence mode="wait">
          <motion.div
            key={currentFactIndex}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            transition={{ duration: 0.5 }}
            className="bg-[#F7F5F4] rounded-2xl p-5 border border-[#1A1A1A]/10"
          >
            <p className="text-[#1A1A1A] text-center text-[14px] leading-relaxed">
              {WINE_FACTS[currentFactIndex]}
            </p>
          </motion.div>
        </AnimatePresence>
      </div>

      {/* Progress Bar */}
      <motion.div
        className="w-full max-w-xs h-1 bg-[#9F5721]/10 rounded-full mt-8 overflow-hidden"
      >
        <motion.div
          className="h-full bg-[#9F5721]"
          initial={{ width: "0%" }}
          animate={{ width: "100%" }}
          transition={{
            duration: 3,
            repeat: Infinity,
            ease: "linear",
          }}
        />
      </motion.div>
    </div>
  );
}